@page "/"
@inject HttpClient Http

@if (stats == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <h1>@stats.CoinTag explorer</h1>
    
    <br />
    <SearchBar />
    <br />
    <br />

    <p>Network information.</p>

    <table class="table table-sm">
        <thead>
            <tr>
                <th>Item</th>
                <th>Info</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Last block</td><td>@stats.ClientInfo.Blocks</td></tr>
            <tr><td>Connections</td><td>@stats.ClientInfo.Connections</td></tr>
            <tr><td>Is Testnet</td><td>@stats.ClientInfo.Testnet</td></tr>
            <tr><td>RelayTxFee</td><td>@stats.ClientInfo.RelayTxFee</td></tr>
            <tr><td>ProtocolVersion</td><td>@stats.ClientInfo.ProtocolVersion</td></tr>
            <tr><td>Version</td><td>@stats.ClientInfo.Version</td></tr>
            <tr><td>Sync Progress</td><td>@stats.Progress</td></tr>
            <tr><td>Transactions In Pool</td><td>@stats.TransactionsInPool</td></tr>
            
            @if (@stats.ClientInfo.Errors != null)
            {
                <tr><td>Errors</td><td>@stats.ClientInfo.Errors</td></tr>
            }
        </tbody>
    </table>

}

@code {

    DataTypes.Statistics stats;

    protected override async Task OnInitAsync()
    {
        stats = await Http.GetJsonAsync<DataTypes.Statistics>("http://localhost:9000/api/stats?api-version=1.0");
    }
}